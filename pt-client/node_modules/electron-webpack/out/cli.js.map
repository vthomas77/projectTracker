{"version":3,"sources":["../src/cli.ts"],"names":[],"mappings":";;;;AAGA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;;;AAEA;AACA;AACA,iBACG,OADH,CACW,CAAC,KAAD,EAAQ,SAAR,EAAmB,GAAnB,CADX,EACoC,qBADpC,EAC2D,SAAS,KADpE,EAC2E,QAAQ,MAAM,KAAN,CADnF,EAEG,OAFH,CAEW,CAAC,MAAD,CAFX,EAEqB,sBAFrB,EAE6C,SAAS,KAFtD,EAE6D,QAAQ,MAAM,MAAN,CAFrE,EAGG,OAHH,CAGW,CAAC,UAAD,CAHX,EAGyB,0BAHzB,EAGqD,SAAS,KAH9D,EAGqE,QAAQ,MAAM,UAAN,CAH7E,EAIG,OAJH,CAIW,CAAC,KAAD,CAJX,EAIoB,qBAJpB,EAI2C,SAAS,KAJpD,EAI2D,QAAQ,MAAM,cAAN,CAJnE,EAKG,OALH,CAKW,CAAC,KAAD,CALX,EAKoB,wBALpB,EAK8C,SAAS,KALvD,EAK8D,QAAQ,cALtE,EAMG,IANH;;AAQA,SAAA,KAAA,CAAe,UAAf,EAAiC;AAC/B,QAAM,OAAO,QAAQ,IAArB,CAD+B,CAE/B;;AACA,QAAM,aAAa,KAAK,MAAL,GAAc,CAAd,IAAmB,CAAC,KAAK,CAAL,EAAQ,UAAR,CAAmB,GAAnB,CAApB,GAA8C,CAA9C,GAAkD,CAArE;AACA,QAAM,mBAAmB,aAAa,KAAK,MAAlB,GAA2B,KAAK,KAAL,CAAW,UAAX,CAA3B,GAAoD,EAA7E,CAJ+B,CAK/B;;AACA,OAAK,MAAL,GAAc,CAAd;;AACA,MAAI,CAAC,iBAAiB,IAAjB,CAAsB,MAAM,GAAG,QAAH,CAAY,kBAAZ,CAA5B,CAAL,EAAmE;AACjE,SAAK,IAAL,CAAU,kBAAV;AACD;;AACD,OAAK,IAAL,CAAU,YAAV;AACA,OAAK,IAAL,CAAU,GAAG,gBAAb;AACA,OAAK,IAAL,CAAU,UAAV,EAAsB,KAAK,IAAL,CAAU,SAAV,EAAqB,IAArB,EAA2B,WAAW,UAAU,YAAhD,CAAtB;;AAEA,UAAQ,OAAR,EAAiB,KAAK,KAAL,CAAW,CAAX,CAAjB;;AACA,UAAQ,KAAK,IAAL,CAAU,QAAQ,GAAR,EAAV,EAAyB,cAAzB,EAAyC,aAAzC,EAAwD,KAAxD,EAA+D,YAA/D,CAAR;AACD;;AAED,SAAA,YAAA,GAAA;AACE,UAAQ,kBAAR;AACD,C","sourcesContent":["#!/usr/bin/env node\n\nimport * as path from \"path\"\nimport yargs from \"yargs\"\n\n// not strict because we allow to pass any webpack args\n// tslint:disable-next-line:no-unused-expression\nyargs\n  .command([\"app\", \"compile\", \"*\"], \"Compile application\", yargs => yargs, argv => build(\"app\"))\n  .command([\"main\"], \"Compile main process\", yargs => yargs, argv => build(\"main\"))\n  .command([\"renderer\"], \"Compile renderer process\", yargs => yargs, argv => build(\"renderer\"))\n  .command([\"dll\"], \"Compile DLL bundles\", yargs => yargs, argv => build(\"renderer.dll\"))\n  .command([\"dev\"], \"Run a development mode\", yargs => yargs, argv => runInDevMode())\n  .argv\n\nfunction build(configFile: string) {\n  const args = process.argv\n  // if command `electron-webpack` - remove first 2 args, if `electron-webpack compile` (or any other subcommand name) - 3\n  const sliceIndex = args.length > 2 && !args[2].startsWith(\"-\") ? 3 : 2\n  const extraWebpackArgs = sliceIndex < args.length ? args.slice(sliceIndex) : []\n  // remove extra args\n  args.length = 2\n  if (!extraWebpackArgs.some(it => it.includes(\"--env.production\"))) {\n    args.push(\"--env.production\")\n  }\n  args.push(\"--progress\")\n  args.push(...extraWebpackArgs)\n  args.push(\"--config\", path.join(__dirname, \"..\", `webpack.${configFile}.config.js`))\n\n  require(\"yargs\")(args.slice(2))\n  require(path.join(process.cwd(), \"node_modules\", \"webpack-cli\", \"bin\", \"webpack.js\"))\n}\n\nfunction runInDevMode() {\n  require(\"./dev/dev-runner\")\n}"],"sourceRoot":""}
